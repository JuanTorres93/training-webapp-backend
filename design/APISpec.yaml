openapi: 3.0.0
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/KASHYR26/training-webapp/1.0.0
info:
  version: "1.0.0"
  title: training-webapp
  description: The API for the EatBacon IOT project
paths:
  /users:
    get:
      tags:
        - Users
      description: returns all registered users
      operationId: getAllUsers
      responses:
        '200':
          description: All the users
          content:
            application/json:
              schema:
                type: array
                items:
                    $ref: '#/components/schemas/User'

        '403':
          $ref: '#/components/responses/403'

    post:
      tags:
        - Users
      operationId: registerUser
      description: Create new user
      responses:
        '201':
          description: successfully registered user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
                
        '400':
          $ref: '#/components/responses/400'
                
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUser'
              
  /users/{id}:
    parameters:
      - name: id
        in: path
        required: true
        description: User id
        schema:
          type: integer
    get:
      tags:
        - Users
      description: returns the user specified by id
      operationId: getUserById
      responses:
        '200':
          description: single user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
                
        '400':
          $ref: '#/components/responses/400'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'
    put:
      tags:
        - Users
      operationId: updateUser
      description: Update existing user
      responses:
        '200':
          description: successfully updated user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
                
        '400':
          $ref: '#/components/responses/400'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'
                
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUser'
    delete:
      tags:
        - Users
      description: 'Delete the user specified by id'
      responses:
        '200':
          description: deletes users and returns it
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

        '400':
          $ref: '#/components/responses/400'

        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'
              
  /exercises:
    get:
      tags:
        - Exercises
      description: returns all exercises
      operationId: getAllExercises
      responses:
        '200':
          description: list of all exercises
          content:
            application/json:
              schema:
                type: array
                items:
                    $ref: '#/components/schemas/Exercise'
    post:
      tags:
        - Exercises
      description: Create new exercise
      operationId: createNewExercise
      responses:
        '201':
          description: successfully created exercise
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exercise'
                
        '400':
          $ref: '#/components/responses/400'

        '403':
          $ref: '#/components/responses/403'
                
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateExercise'
              
  /exercises/{id}:
    parameters:
      - name: id
        in: path
        required: true
        description: Exercise id
        schema:
          type: integer
    get:
      tags:
        - Exercises
      description: returns the exercise specified by id
      operationId: getExerciseById
      responses:
        '200':
          description: single exercise
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exercise'
                
        '400':
          $ref: '#/components/responses/400'

        # TODO add 401?

        '404':
          $ref: '#/components/responses/404'
    put:
      tags:
        - Exercises
      description: Update exercise specified by id
      operationId: updateExercise
      responses:
        '200':
          description: successfully updated exercise
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateExercise'
                
        '400':
          $ref: '#/components/responses/400'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'
                
        '404':
          $ref: '#/components/responses/404'
                
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateExercise'

    delete:
      tags:
        - Exercises
      description: 'Delete the exercise specified by id'
      responses:
        '200':
          description: deletes exercise and returns it
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exercise'

        '400':
          $ref: '#/components/responses/400'

        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'
              
  /workouts:
    get:
      tags:
        - Workouts
      description: returns all workouts
      operationId: getAllWorkouts
      responses:
        '200':
          description: list of all workouts
          content:
            application/json:
              schema:
                type: array
                items:
                    $ref: '#/components/schemas/Workout'
    post:
      tags:
        - Workouts
      description: Create new workout
      operationId: createNewWorkout
      responses:
        '201':
          description: successfully created workout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateWorkout'
              examples:
                Workout:
                  $ref: '#/components/examples/CreateWorkout'
                
        '400':
          $ref: '#/components/responses/400'
                
        '401':
          $ref: '#/components/responses/401'
                
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWorkout'
              
  /workouts/{id}:
    parameters:
      - name: id
        in: path
        required: true
        description: workout id
        schema:
          type: integer
    get:
      tags:
        - Workouts
      description: returns a single workout
      operationId: getWorkoutById
      responses:
        '200':
          description: single workout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workout'
              examples:
                Workout:
                  $ref: '#/components/examples/Workout'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'

    post:
      tags:
        - Workouts
      description: adds exercise to workout
      operationId: addExerciseToWorkout
      responses:
        '201':
          description: successfully added exercise
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddExerciseToWorkout'
              examples:
                Workout:
                  $ref: '#/components/examples/AddExerciseToWorkout'
                
        '400':
          $ref: '#/components/responses/400'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'

    put:
      tags:
        - Workouts
      description: Update workout
      operationId: updateWorkout
      responses:
        '200':
          description: successfully updated workout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateWorkout'
              examples:
                Workout:
                  $ref: '#/components/examples/CreateWorkout'
                
        '400':
          $ref: '#/components/responses/400'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'

    delete:
      tags:
        - Workouts
      description: Delete workout
      operationId: deleteWorkout
      responses:
        '200':
          description: successfully deleted workout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workout'
              examples:
                Workout:
                  $ref: '#/components/examples/Workout'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'








              
  /workouts/{id}/exercises/{exerciseId}:
    parameters:
      - name: id
        in: path
        required: true
        description: workout id
        schema:
          type: integer
      - name: exerciseId
        in: path
        required: true
        description: exercise id
        schema:
          type: integer

    put:
      tags:
        - Workouts
      description: Update exercise from workout
      operationId: updateExerciseFromWorkout
      responses:
        '200':
          description: successfully updated exercise
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddExerciseToWorkout'
              examples:
                Workout:
                  $ref: '#/components/examples/AddExerciseToWorkout'
                
        '400':
          $ref: '#/components/responses/400'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'

    delete:
      tags:
        - Workouts
      description: Delete exercise from workout
      operationId: deleteWorkoutExercise
      responses:
        '200':
          description: successfully deleted exercise from workout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddExerciseToWorkout'
              examples:
                Workout:
                  $ref: '#/components/examples/AddExerciseToWorkout'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'
              
  /workouts/templates:
    get:
      tags:
        - Workouts
      description: returns all templates
      operationId: getWorkoutAllTemplates
      responses:
        '200':
          description: returns all templates
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllWorkoutTemplates'
              examples:
                Workout:
                  $ref: '#/components/examples/AllWorkoutTemplates'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

    post:
      tags:
        - Workouts
      description: adds exercise to workout template
      operationId: addExerciseToWorkoutTemplate
      responses:
        '201':
          description: successfully added exercise to template
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkoutTemplate'
              examples:
                Workout:
                  $ref: '#/components/examples/WorkoutTemplate'
                
        '400':
          $ref: '#/components/responses/400'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'
                
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddExerciseToWorkoutTemplate'
            examples:
              CreateWorkoutTemplate:
                $ref: '#/components/examples/AddExerciseToWorkoutTemplate'
              
  /workouts/templates/{id}:
    get:
      tags:
        - Workouts
      description: returns a single workout template
      operationId: getWorkoutTemplateById
      parameters:
        - name: id
          in: path
          required: true
          description: Template id
          schema:
            type: integer
      responses:
        '200':
          description: single workout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkoutTemplate'
              examples:
                Workout:
                  $ref: '#/components/examples/WorkoutTemplate'
                
        '401':
          $ref: '#/components/responses/401'

        '403':
          $ref: '#/components/responses/403'

        '404':
          $ref: '#/components/responses/404'
                
components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
          description: User id
        alias:
          type: string
          description: User name
        email:
          type: string
          description: User email
        last_name:
          type: string
          description: User last name
        img:
          type: string
          description: User profile image's URI
        second_last_name:
          type: string
          description: User second last name
      example:
        id: 3
        alias: "John"
        email: 'John.Doe@domain.com'
        last_name: 'Doe'
        img: 'https://i.pinimg.com/736x/7f/64/3f/7f643f0db514d7971349c416e29e42a8.jpg'
        second_last_name: 'Smith'
      description: User object
      
    CreateUser:
      type: object
      required:
        - alias
        - email
        - password
      properties:
        alias:
          type: string
          description: User name
        email:
          type: string
          description: User email
        password:
          type: string
          description: user password
        last_name:
          type: string
          description: User last name
        second_last_name:
          type: string
          description: User second last name
      example:
        alias: "John"
        email: 'John.Doe@domain.com'
        last_name: 'Doe'
        password: 'secure_password'
        second_last_name: 'Smith'
      description: Info needed to create user object
      
    UpdateUser:
      type: object
      properties:
        alias:
          type: string
          description: User name
        email:
          type: string
          description: User email
        password:
          type: string
          description: user password
        last_name:
          type: string
          description: User last name
        second_last_name:
          type: string
          description: User second last name
        img:
          type: string
          description: User profile image

      example:
        alias: "John"
        email: 'John.Doe@domain.com'
        last_name: 'Doe'
        password: 'secure_password'
        second_last_name: 'Smith'
        # TODO research about how to handle it from server. This is susceptible of beign changed
        img: "Link to img"
      description: Info needed to update user object
      
    Exercise:
      type: object
      properties:
        id:
          type: integer
          description: Exercise id
        alias:
          type: string
          description: Exercise name
        description:
          type: string
          description: Exercise email
      example:
        id: 3
        alias: "Bicep curl"
        description: "A staple in strength training, this exercise targets the biceps brachii muscle group. Executed with dumbbells or a barbell, the movement involves flexing the elbow to lift the weight towards the shoulders while keeping the upper arms stationary. Proper form is crucial to isolate the biceps and prevent swinging or momentum. It strengthens the biceps, improves arm aesthetics, and aids in functional movements like lifting."
      description: Exercise object
      
    CreateExercise:
      type: object
      required:
        - alias
      properties:
        alias:
          type: string
          description: Exercise name
        description:
          type: string
          description: Exercise email
      example:
        alias: "Bicep curl"
        description: "A staple in strength training, this exercise targets the biceps brachii muscle group. Executed with dumbbells or a barbell, the movement involves flexing the elbow to lift the weight towards the shoulders while keeping the upper arms stationary. Proper form is crucial to isolate the biceps and prevent swinging or momentum. It strengthens the biceps, improves arm aesthetics, and aids in functional movements like lifting."
      description: Exercise object
      
    UpdateExercise:
      type: object
      properties:
        alias:
          type: string
          description: Exercise name
        description:
          type: string
          description: Exercise email
      example:
        alias: "Bicep curl"
        description: "A staple in strength training, this exercise targets the biceps brachii muscle group. Executed with dumbbells or a barbell, the movement involves flexing the elbow to lift the weight towards the shoulders while keeping the upper arms stationary. Proper form is crucial to isolate the biceps and prevent swinging or momentum. It strengthens the biceps, improves arm aesthetics, and aids in functional movements like lifting."
      description: Exercise object
      
    WorkoutExercise:
      type: object
      properties:
        id:
          type: integer
        alias:
          type: string
          description: Exercise name
        set:
          type: integer
          description: Set number of the exercise
        reps:
          type: integer
          description: Number of reps that were performed
        weight:
          type: number
          description: Weight used in the set
        time_in_seconds:
          type: integer
          description: Time in seconds that the set spanned
      
    AddExerciseToWorkout:
      type: object
      required:
        - ExerciseSet
      properties:
        ExerciseSet:
          type: integer
          description: Number of the set in which the exercise was performed
        reps:
          type: integer
          description: Number of reps performed
        weight:
          type: number
          description: weight used
        time_in_seconds:
          type: integer
          description: Time in seconds that the exercise spanned
    
    AddExerciseToWorkoutTemplate:
      type: object
      required:
        - WorkoutId
        - ExerciseId
        - ExerciseOrder
        - ExerciseSets
      properties:
        WorkoutId:
          type: integer
          description: Workout associated with the template
        ExerciseId:
          type: integer
          description: Id of the exercise to include in the template
        ExerciseOrder:
          type: integer
          description: Order of the exercise in the template
        ExerciseSets:
          type: integer
          description: Number of sets of the exercise to perform
          
    Workout:
      type: object
      properties:
        id:
          type: integer
        alias:
          type: string
          description: Exercise name
        description:
          type: string
          description: Exercise description
        exercises:
          type: array
          items:
            $ref: '#/components/schemas/WorkoutExercise'
            
    CreateWorkout:
      type: object
      required:
        - alias
      properties:
        alias:
          type: string
          description: Workout name
        description:
          type: string
          description: Workout description
      example:
        alias: "Pull"
        description: "Pulling routine for back and bicep strenghtening"
      description: Workout object
            
    UpdateWorkout:
      type: object
      properties:
        alias:
          type: string
          description: Workout name
        description:
          type: string
          description: Workout description
      example:
        alias: "Pull"
        description: "Pulling routine for back and bicep strenghtening"
      description: Workout object
          
    WorkoutTemplate:
      type: object
      properties:
        id:
          type: integer
        alias:
          type: string
          description: Exercise name
        description:
          type: string
          description: Exercise email
        exercises:
          type: array
          items:
            $ref: '#/components/schemas/WorkoutTemplate'
          
    AllWorkoutTemplates:
      type: array
      items:
        $ref: '#/components/schemas/WorkoutTemplate'
    
  responses:
    400:
      description: Bad request
      content:
        application/json:
          schema:
            type: object
            properties:
              msg:
                type: string
                description: Error messagge. 
            example:
              msg: Wrong or missing parameter

    401:
      description: Not logged in
      content:
        application/json:
          schema:
            type: object
            properties:
              msg:
                type: string
                description: Error messagge. 

            example:
              msg: Need to log in

    403:
      description: Not having permissions to access information
      content:
        application/json:
          schema:
            type: object
            properties:
              msg:
                type: string
                description: Error messagge. 
          example:
            msg: Don't have permissions to access information
    
    404:
      description: Resource was not found
      content:
        application/json:
          schema:
            type: object
            properties:
              msg:
                type: string
                description: Error messagge. 

            example:
              msg: Resource was not found
          
  examples:
    WorkoutExercise:
      value:
        id: 4
        alias: Pull up
        set: 3
        reps: 9
        weight: 7.5
        time_in_seconds: Null
        
    Workout:
      value:
        id: 2
        alias: Pull
        description: "Pull training routine"
        exercises:
          - id: 4
            alias: Pull up
            set: 1
            reps: 9
            weight: 7.5
            time_in_seconds: Null
          - id: 4
            alias: Pull up
            set: 2
            reps: 9
            weight: 7.5
            time_in_seconds: Null
          - id: 4
            alias: Pull up
            set: 3
            reps: 8
            weight: 7.5
            time_in_seconds: Null
          - id: 5
            alias: Barbell row
            set: 1
            reps: 8
            weight: 75
            time_in_seconds: Null
          - id: 5
            alias: Barbell row
            set: 2
            reps: 8
            weight: 75
            time_in_seconds: Null
          - id: 5
            alias: Barbell row
            set: 3
            reps: 7
            weight: 75
            time_in_seconds: Null
            
    WorkoutTemplate:
      value:
        id: 2
        alias: Pull
        description: "Pull training routine"
        exercises:
          - id: 4
            alias: Pull up
            order: 1
            sets: 3
          - id: 5
            alias: Barbell rows
            order: 2
            sets: 3
          - id: 5
            alias: Biceps curl
            order: 3
            sets: 3
            
    AllWorkoutTemplates:
      value:
        - id: 1
          alias: Push
          description: "Push training routine"
          exercises:
            - id: 1
              alias: Bench press
              order: 1
              sets: 3
            - id: 2
              alias: Military press
              order: 2
              sets: 3
            - id: 3
              alias: Dips
              order: 3
              sets: 3
        - id: 2
          alias: Pull
          description: "Pull training routine"
          exercises:
            - id: 4
              alias: Pull up
              order: 1
              sets: 3
            - id: 5
              alias: Barbell rows
              order: 2
              sets: 3
            - id: 5
              alias: Biceps curl
              order: 3
              sets: 3
            
    CreateWorkout:
      value:
        id: 6
        alias: "Pull"
        description: "Pulling routine for back and bicep strenghtening"
        exercises: []
            
    AddExerciseToWorkout:
      value:
        ExerciseSet: 2
        reps: 7
        weight: 80
        time_in_seconds: null
            
    AddExerciseToWorkoutTemplate:
      value:
        WorkoutId: 6
        ExerciseId: 2
        ExerciseOrder: 7
        ExerciseSets: 80